const phoneSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="42" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="42" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="7b136a76da"><path d="M 80 75.382812 L 306.882812 75.382812 L 306.882812 299 L 80 299 Z M 80 75.382812 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#7b136a76da)"><path fill="#008c71" d="M 104.773438 77.828125 C 104.773438 77.828125 68.34375 118.424375 84.535156 153.539062 C 99.640625 186.238281 145.289062 262.132812 221.929688 293.191406 C 233.117188 297.730469 245.390625 299.515625 257.273438 297.355469 C 266.171875 295.738281 290.746094 290.390625 298.824219 280.761719 C 299.671875 279.746094 301.265625 278.558594 302.867188 276.109375 C 304.277344 273.949219 306.871094 271.105469 305.894531 266.257812 C 304.582031 259.738281 276.980469 234.292969 266.3125 224.667969 C 263.171875 221.839844 259.144531 220.125 254.929688 220.125 C 252.183594 220.125 249.6875 220.75 242.667969 222.5625 C 241.21875 235.785156 233.367188 244.535156 226.714244 242.019531 C 217.996094 252.589844 163.742188 214.929688 141.84375 170.761719 C 138.457031 163.933594 139.90625 155.699219 145.414062 150.433594 C 152.292969 143.871094 163.394531 132.765625 163.714244 130.507812 C 164.257812 126.730469 162.808594 124.390625 160.660156 119.542969 C 158.957031 115.722656 134.175781 91.453125 123.699219 81.308594 C 119.90625 77.632812 114.816406 75.457031 109.527344 75.640625 C 107.785156 75.707031 105.46875 76.992188 104.773438 77.828125 Z M 104.773438 77.828125 " fill-opacity="1" fill-rule="nonzero"/></g></svg>`;
const nameSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="42" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="42" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="c520f370a6"><path d="M 90.113281 61.839844 L 285.113281 61.839844 L 285.113281 313.089844 L 90.113281 313.089844 Z M 90.113281 61.839844 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#c520f370a6)"><path fill="#2aa9cb" d="M 285.113281 294.078125 C 285.113281 227.054688 241.425781 172.753906 187.613281 172.753906 C 133.800781 172.753906 90.113281 227.054688 90.113281 294.078125 C 90.113281 304.53125 133.800781 313.050781 187.613281 313.050781 C 241.425781 313.050781 285.113281 304.53125 285.113281 294.078125 Z M 187.613281 61.878906 C 216.964244 61.878906 240.742188 85.621094 240.742188 114.929688 C 240.742188 144.238281 216.964244 167.980469 187.613281 167.980469 C 158.261719 167.980469 134.424375 144.238281 134.424375 114.929688 C 134.424375 85.621094 158.261719 61.878906 187.613281 61.878906 Z M 187.613281 61.878906 " fill-opacity="1" fill-rule="evenodd"/></g></svg>`;
const adressSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="42" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="42" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="8a6525da75"><path d="M 81 103 L 294 103 L 294 279.765625 L 81 279.765625 Z M 81 103 " clip-rule="nonzero"/></clipPath><clipPath id="bcb25067f6"><path d="M 224 95.265625 L 251 95.265625 L 251 135 L 224 135 Z M 224 95.265625 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#8a6525da75)"><path fill="#4a9bf0" d="M 190.777344 104.222656 C 188.769531 102.898438 186.164062 102.898438 184.15625 104.222656 L 81.925781 171.890625 L 88.546875 181.898438 L 103.664062 171.894531 L 103.664062 273.984375 C 103.664062 277.296875 106.355469 279.996094 109.671875 279.996094 L 160.449219 279.996094 C 163.757812 279.996094 166.445312 277.304688 166.445312 273.984375 L 166.445312 201.511719 L 208.5 201.511719 L 208.5 273.984375 C 208.5 277.296875 211.1875 279.996094 214.507812 279.996094 L 265.285156 279.996094 C 268.59375 279.996094 271.28125 277.304688 271.28125 273.984375 L 271.28125 171.894531 L 286.402344 181.898438 L 293.019531 171.890625 Z M 190.777344 104.222656 " fill-opacity="1" fill-rule="nonzero"/></g><g clip-path="url(#bcb25067f6)"><path fill="#2d3e50" d="M 250.460938 95.265625 L 224.503906 95.265625 L 224.503906 117.738281 L 250.460938 134.921875 Z M 250.460938 95.265625 " fill-opacity="1" fill-rule="nonzero"/></g></svg>`;
const boxGreenSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="42" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="32" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="78479dbb67"><path d="M 116 124.191406 L 207.894531 124.191406 L 207.894531 278.914062 L 116 278.914062 Z M 116 124.191406 " clip-rule="nonzero"/></clipPath><clipPath id="828c9c3346"><path d="M 212.199219 124.191406 L 303.917969 124.191406 L 303.917969 278.914062 L 212.199219 278.914062 Z M 212.199219 124.191406 " clip-rule="nonzero"/></clipPath><clipPath id="44e7e7114d"><path d="M 124 95.941406 L 296 95.941406 L 296 149 L 124 149 Z M 124 95.941406 " clip-rule="nonzero"/></clipPath><clipPath id="953444d6df"><path d="M 71.417969 166 L 165 166 L 165 260 L 71.417969 260 Z M 71.417969 166 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#78479dbb67)"><path fill="#39b54a" d="M 116.097656 124.355469 L 116.097656 162.027344 C 116.675781 162.007812 117.257812 162 117.835938 162 C 131.4375 162 144.378906 167.351562 153.996094 176.945312 C 163.613281 186.542969 168.976562 199.460938 168.976562 213.03125 C 168.976562 226.601562 163.613281 239.519531 153.996094 249.117188 C 149.304688 253.800781 143.816406 257.476562 137.847656 260.007812 L 207.6875 278.910156 L 207.6875 152.714844 C 207.535156 152.691406 207.386719 152.652344 207.242188 152.597656 C 176.863281 143.179688 146.472656 133.789062 116.097656 124.355469 " fill-opacity="1" fill-rule="evenodd"/></g><g clip-path="url(#828c9c3346)"><path fill="#39b54a" d="M 290.699219 226.066406 L 264.347656 234.078125 C 263.421875 234.265625 262.726562 235.082031 262.726562 236.0625 L 262.726562 251.910156 C 262.699219 253.257812 264.039062 254.3125 265.347656 253.878906 L 291.699219 245.871094 C 292.625 245.679688 293.320312 244.863281 293.320312 243.886719 L 293.320312 228.035156 C 293.34375 226.671875 292.015625 225.652344 290.699219 226.066406 Z M 300.402344 125.449219 C 302.957031 124.632812 303.242188 124.570312 303.933594 124.355469 L 303.933594 252.539062 C 303.945312 253.441406 303.347656 254.277344 302.433594 254.523438 L 212.363281 278.914062 L 212.363281 152.710938 C 212.507812 152.6875 212.652344 152.648438 212.789062 152.597656 L 300.402344 125.449219 " fill-opacity="1" fill-rule="evenodd"/></g><path fill="#39b54a" d="M 266.789062 237.554688 L 289.253906 230.730469 L 289.253906 242.390625 L 266.789062 249.21875 L 266.789062 237.554688 " fill-opacity="1" fill-rule="evenodd"/><g clip-path="url(#44e7e7114d)"><path fill="#39b54a" d="M 233.558594 110.613281 C 234.632812 110.292969 235.765625 110.894531 236.089844 111.96875 C 236.414062 113.039062 235.804688 114.171875 234.730469 114.496094 L 167.4375 134.832031 C 181.253906 139 195.027344 143.3125 208.652344 148.097656 L 210.0625 148.308594 L 211.386719 148.097656 L 295.875 121.917969 L 210.015625 95.972656 L 124.183594 121.910156 C 136.605469 125.703125 149.074219 129.339844 161.519531 133.058594 C 172.085938 128.976562 226.484375 112.75 233.558594 110.613281 " fill-opacity="1" fill-rule="evenodd"/></g><g clip-path="url(#953444d6df)"><path fill="#39b54a" d="M 80.859375 213.03125 C 80.859375 222.851562 84.730469 232.179688 91.691406 239.125 C 98.652344 246.066406 107.996094 249.929688 117.835938 249.929688 C 127.679688 249.929688 137.023438 246.066406 143.984375 239.125 C 150.941406 232.179688 154.8125 222.851562 154.8125 213.03125 C 154.8125 203.210938 150.941406 193.882812 143.984375 186.941406 C 137.023438 179.996094 127.679688 176.132812 117.835938 176.132812 C 107.996094 176.132812 98.652344 179.996094 91.691406 186.941406 C 84.730469 193.882812 80.859375 203.210938 80.859375 213.03125 Z M 117.835938 166.710938 C 130.1875 166.710938 141.929688 171.566406 150.660156 180.277344 C 159.390625 188.992188 164.257812 200.707031 164.257812 213.03125 C 164.257812 225.355469 159.390625 237.070312 150.660156 245.785156 C 141.929688 254.5 130.1875 259.351562 117.835938 259.351562 C 105.484375 259.351562 93.746094 254.5 85.015625 245.785156 C 76.28125 237.070312 71.417969 225.355469 71.417969 213.03125 C 71.417969 200.707031 76.285156 188.992188 85.015625 180.277344 C 93.746094 171.566406 105.484375 166.710938 117.835938 166.710938 " fill-opacity="1" fill-rule="evenodd"/></g><path fill="#39b54a" d="M 111.261719 219.210938 L 133.257812 197.253906 C 135.101562 195.417969 138.09375 195.417969 139.9375 197.253906 C 141.777344 199.09375 141.777344 202.078125 139.9375 203.917969 L 115.019531 228.785156 C 113.316406 230.480469 110.65625 230.664062 108.753906 229.183594 L 96.175781 219.410156 C 94.125 217.8125 93.761719 214.851562 95.359375 212.808594 C 96.960938 210.761719 99.921875 210.398438 101.972656 211.992188 L 111.261719 219.210938 " fill-opacity="1" fill-rule="evenodd"/></svg>`;
const boxRedSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="42" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="32" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="aeff179563"><path d="M 116 124.191406 L 207.894531 124.191406 L 207.894531 278.914062 L 116 278.914062 Z M 116 124.191406 " clip-rule="nonzero"/></clipPath><clipPath id="0d316bccf6"><path d="M 212.199219 124.191406 L 303.917969 124.191406 L 303.917969 278.914062 L 212.199219 278.914062 Z M 212.199219 124.191406 " clip-rule="nonzero"/></clipPath><clipPath id="e8864ccab3"><path d="M 124 95.941406 L 296 95.941406 L 296 149 L 124 149 Z M 124 95.941406 " clip-rule="nonzero"/></clipPath><clipPath id="820b625869"><path d="M 71.417969 166 L 165 166 L 165 260 L 71.417969 260 Z M 71.417969 166 " clip-rule="nonzero"/></clipPath><clipPath id="b7eaab906b"><path d="M 78.949219 174.472656 L 155.921875 174.472656 L 155.921875 251.449219 L 78.949219 251.449219 Z M 78.949219 174.472656 " clip-rule="nonzero"/></clipPath><clipPath id="c4c594292a"><path d="M 117.433594 174.472656 C 96.179688 174.472656 78.949219 191.703125 78.949219 212.960938 C 78.949219 234.214844 96.179688 251.449219 117.433594 251.449219 C 138.691406 251.449219 155.921875 234.214844 155.921875 212.960938 C 155.921875 191.703125 138.691406 174.472656 117.433594 174.472656 " clip-rule="nonzero"/></clipPath><clipPath id="d1f55724fd"><path d="M 84.867188 180.394531 L 150.117188 180.394531 L 150.117188 245.644531 L 84.867188 245.644531 Z M 84.867188 180.394531 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#aeff179563)"><path fill="#e23024" d="M 116.097656 124.355469 L 116.097656 162.027344 C 116.675781 162.007812 117.257812 162 117.835938 162 C 131.4375 162 144.378906 167.351562 153.996094 176.945312 C 163.613281 186.542969 168.976562 199.460938 168.976562 213.03125 C 168.976562 226.601562 163.613281 239.519531 153.996094 249.117188 C 149.304688 253.800781 143.816406 257.476562 137.847656 260.007812 L 207.6875 278.910156 L 207.6875 152.714844 C 207.535156 152.691406 207.386719 152.652344 207.242188 152.597656 C 176.863281 143.179688 146.472656 133.789062 116.097656 124.355469 " fill-opacity="1" fill-rule="evenodd"/></g><g clip-path="url(#0d316bccf6)"><path fill="#e23024" d="M 290.699219 226.066406 L 264.347656 234.078125 C 263.421875 234.265625 262.726562 235.082031 262.726562 236.0625 L 262.726562 251.910156 C 262.699219 253.257812 264.039062 254.3125 265.347656 253.878906 L 291.699219 245.871094 C 292.625 245.679688 293.320312 244.863281 293.320312 243.886719 L 293.320312 228.035156 C 293.34375 226.667969 292.015625 225.652344 290.699219 226.066406 Z M 300.402344 125.449219 C 302.957031 124.632812 303.242188 124.570312 303.933594 124.355469 L 303.933594 252.539062 C 303.945312 253.441406 303.347656 254.277344 302.433594 254.523438 L 212.363281 278.914062 L 212.363281 152.710938 C 212.507812 152.6875 212.652344 152.648438 212.789062 152.597656 L 300.402344 125.449219 " fill-opacity="1" fill-rule="evenodd"/></g><path fill="#e23024" d="M 266.789062 237.554688 L 289.253906 230.730469 L 289.253906 242.390625 L 266.789062 249.21875 L 266.789062 237.554688 " fill-opacity="1" fill-rule="evenodd"/><g clip-path="url(#e8864ccab3)"><path fill="#e23024" d="M 233.558594 110.613281 C 234.632812 110.292969 235.765625 110.894531 236.089844 111.96875 C 236.414062 113.039062 235.804688 114.171875 234.730469 114.496094 L 167.4375 134.832031 C 181.253906 139 195.027344 143.3125 208.652344 148.097656 L 210.0625 148.308594 L 211.386719 148.097656 L 295.875 121.917969 L 210.015625 95.972656 L 124.183594 121.910156 C 136.605469 125.703125 149.074219 129.339844 161.519531 133.058594 C 172.085938 128.976562 226.484375 112.75 233.558594 110.613281 " fill-opacity="1" fill-rule="evenodd"/></g><g clip-path="url(#820b625869)"><path fill="#e23024" d="M 80.859375 213.03125 C 80.859375 222.851562 84.730469 232.179688 91.691406 239.125 C 98.652344 246.066406 107.996094 249.929688 117.835938 249.929688 C 127.679688 249.929688 137.023438 246.066406 143.984375 239.125 C 150.941406 232.179688 154.8125 222.851562 154.8125 213.03125 C 154.8125 203.210938 150.941406 193.882812 143.984375 186.941406 C 137.023438 179.996094 127.679688 176.132812 117.835938 176.132812 C 107.996094 176.132812 98.652344 179.996094 91.691406 186.941406 C 84.730469 193.882812 80.859375 203.210938 80.859375 213.03125 Z M 117.835938 166.710938 C 130.1875 166.710938 141.929688 171.566406 150.660156 180.277344 C 159.390625 188.992188 164.257812 200.707031 164.257812 213.03125 C 164.257812 225.355469 159.390625 237.070312 150.660156 245.785156 C 141.929688 254.5 130.1875 259.351562 117.835938 259.351562 C 105.484375 259.351562 93.746094 254.5 85.015625 245.785156 C 76.28125 237.070312 71.417969 225.355469 71.417969 213.03125 C 71.417969 200.707031 76.285156 188.992188 85.015625 180.277344 C 93.746094 171.566406 105.484375 166.710938 117.835938 166.710938 " fill-opacity="1" fill-rule="evenodd"/></g><path fill="#e23024" d="M 111.261719 219.210938 L 133.257812 197.253906 C 135.101562 195.417969 138.09375 195.417969 139.9375 197.253906 C 141.777344 199.09375 141.777344 202.078125 139.9375 203.917969 L 115.019531 228.785156 C 113.316406 230.480469 110.65625 230.664062 108.753906 229.183594 L 96.175781 219.410156 C 94.125 217.8125 93.761719 214.851562 95.359375 212.808594 C 96.960938 210.761719 99.921875 210.398438 101.972656 211.992188 L 111.261719 219.210938 " fill-opacity="1" fill-rule="evenodd"/><g clip-path="url(#b7eaab906b)"><g clip-path="url(#c4c594292a)"><path fill="#ffffff" d="M 78.949219 174.472656 L 155.921875 174.472656 L 155.921875 251.449219 L 78.949219 251.449219 Z M 78.949219 174.472656 " fill-opacity="1" fill-rule="nonzero"/></g></g><g clip-path="url(#d1f55724fd)"><path fill="#e23024" d="M 117.453125 180.363281 C 99.46875 180.363281 84.835938 194.996094 84.835938 212.976562 C 84.835938 230.960938 99.46875 245.59375 117.453125 245.59375 C 135.4375 245.59375 150.066406 230.960938 150.066406 212.976562 C 150.066406 194.996094 135.4375 180.363281 117.453125 180.363281 Z M 136.671875 223.363281 C 137.246094 223.933594 137.246094 224.898438 136.671875 225.46875 L 129.953125 232.191406 C 129.671875 232.472656 129.296875 232.625 128.898438 232.625 C 128.492188 232.625 128.117188 232.472656 127.839844 232.191406 L 117.453125 221.804688 L 107.0625 232.191406 C 106.527344 232.730469 105.492188 232.730469 104.957031 232.195312 L 98.234375 225.472656 C 97.953125 225.191406 97.800781 224.816406 97.800781 224.417969 C 97.800781 224.015625 97.953125 223.640625 98.234375 223.359375 L 108.625 212.976562 L 98.234375 202.585938 C 97.953125 202.304688 97.800781 201.929688 97.800781 201.53125 C 97.800781 201.128906 97.953125 200.753906 98.234375 200.476562 L 104.957031 193.753906 C 105.492188 193.214844 106.527344 193.214844 107.0625 193.753906 L 117.453125 204.144531 L 127.84375 193.753906 C 128.378906 193.214844 129.414062 193.214844 129.949219 193.753906 L 136.671875 200.476562 C 136.949219 200.753906 137.101562 201.128906 137.101562 201.527344 C 137.101562 201.929688 136.949219 202.304688 136.671875 202.582031 L 126.28125 212.972656 Z M 136.671875 223.363281 " fill-opacity="1" fill-rule="nonzero"/></g></svg>`;
const riskSvg = `  <img src="https://rlist.mantoudjbladi.com/icons/7.svg" alt="" width="42" heigth="42">`;
let URL_SEND = 'https://api-v1.riskblacklist.com';


var myHeaders = new Headers();
myHeaders.append("Accept", "application/json");
myHeaders.append("Content-Type", "application/json");
myHeaders.append("X-Api-Key", "3AQi9ysOlvV6ZsYyl5OiUe31ckl6XVndBcMRFHeY");


async function submitSignInForm(event) {
  event.preventDefault();
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  let formSignIn = document.querySelector('#risk_signin_form');
  const formData = new FormData(formSignIn);

  if (formData.get('password') && formData.get('phon')) {
    const data = {
      login: formData.get('phon'),
      password: formData.get('password')
    };

    try {
      const response = await fetch(URL_SEND + '/api/login', {
        method: 'POST',
        headers: myHeaders,
        body: JSON.stringify(data)
      });
      const responseData = await response.json();
      if (response.ok) {
        localStorage.setItem("access_token", responseData.token);
        label.innerText = "connect successfully ...";
        label.style.color = 'green';
        label.style.display = 'block';
        setTimeout(() => {
          exitRiskModal();
          location.reload();
        }, 1000);

      } else {
        label.innerText = "email or password are incorrect"
        label.style.display = 'block';
      }

    } catch (error) {
      console.error('Error:', error);
    }
  } else {
    label.innerText = "email or password are required"
    label.style.display = 'block';
  }

}

async function submitSignUpForm(event) {
  event.preventDefault();
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  let formSignUp = document.querySelector('#risk_signup_form');

  const formData = new FormData(formSignUp);
  if (formData.get('name') && formData.get('emaill') && formData.get('pass') && formData.get('conferpass') && formData.get('phon')) {
    if (!formData.get('check')) {
      label.style.display = 'block';
      label.textContent = 'Accept the Terms conditions And Privacy Policy ';
    } else {
      const data = {
        name: formData.get('name'),
        email: formData.get('emaill'),
        password: formData.get('pass'),
        password_confirmation: formData.get('conferpass'),
        phone_number: formData.get('phon')
      };
      try {
        const response = await fetch(URL_SEND + '/api/registe_with_phone', {
          method: 'POST',
          headers: myHeaders,
          body: JSON.stringify(data)
        });
        const responseData = await response.json();

        if (response.ok) {
          localStorage.setItem("access_token", responseData.token);
          label.innerText = "create account successfully ..."
          label.style.color = 'green';
          label.style.display = 'block';
          setTimeout(() => {
            exitRiskModal();
            location.reload();
          }, 1000);
        } else {
          label.innerText = responseData.errors.email ? responseData.errors.email[0] :
            responseData.errors.phone_number ? responseData.errors.phone_number[0] :
            responseData.errors.password ? responseData.errors.password[0] :
            "";
          label.style.display = 'block';
        }

      } catch (error) {
        console.error('Error:', error);
      }
    }
  } else {
    label.style.display = 'block';
    label.textContent = 'all information are required';
  }
}

function submitResetPasswordForm(event) {
  event.preventDefault();
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  let formResetPass = document.querySelector('#risk_resetPass_form');
  const formData = new FormData(formResetPass);

}

function showSignIn() {
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  let modal = document.querySelector('.risk_container');
  let signIn = document.querySelector('#risk_signin');
  let signup = document.querySelector('#risk_signup');
  let forgetPass = document.querySelector('#risk_forget_pass');
  signIn.style.display = 'block';
  signup.style.display = 'none';
  forgetPass.style.display = 'none';
}

function showSignUp() {
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  let modal = document.querySelector('.risk_container');
  let signIn = document.querySelector('#risk_signin');
  let signup = document.querySelector('#risk_signup');
  let forgetPass = document.querySelector('#risk_forget_pass');
  signup.style.display = 'block';
  signIn.style.display = 'none';
  forgetPass.style.display = 'none';
}

function showForgetPass() {
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  let modal = document.querySelector('.risk_container');
  let signIn = document.querySelector('#risk_signin');
  let signup = document.querySelector('#risk_signup');
  let forgetPass = document.querySelector('#risk_forget_pass');
  signup.style.display = 'none';
  signIn.style.display = 'none';
  forgetPass.style.display = 'block';
}

function exitRiskModal() {
  let modal = document.querySelector('.risk_container');
  let signIn = document.querySelector('#risk_signin');
  let signup = document.querySelector('#risk_signup');
  let forgetPass = document.querySelector('#risk_forget_pass');
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  modal.classList.remove('show');
  signIn.style.display = 'none';
  signup.style.display = 'none';
  forgetPass.style.display = 'none';
}

function showModal() {
  let label = document.querySelector('.risk_required');
  label.style.display = 'none';
  let modal = document.querySelector('.risk_container');
  let signIn = document.querySelector('#risk_signin');
  modal.classList.add("show");
  signIn.style.display = 'block';
}

function showpassword(iconClicked) {
  let x = document.getElementById("risk_pass_sin");
  let y = document.getElementById("risk_pass_sup");
  let z = document.getElementById("risk_pass_cf");
  let icon1 = document.getElementById("feye1");
  let icon2 = document.getElementById("feye2");
  let icon3 = document.getElementById("feye3");
  let icon;
  let pass;
  if (iconClicked == 1) {
    pass = x;
    icon = icon1;
  } else if (iconClicked == 2) {
    pass = y;
    icon = icon2;
  } else {
    pass = z;
    icon = icon3;
  }
  if (pass.type === "password") {
    pass.type = "text";
    icon.classList.remove("fa-eye");
    icon.classList.add("fa-eye-slash");

  } else {
    pass.type = "password";
    icon.classList.add("fa-eye");
    icon.classList.remove("fa-eye-slash");
  }
}



function showModalSingIn(closeSpinner) {
  if (document.querySelector('.risk_container')) {
    showModal()
    closeSpinner();
  } else {
    let modal = document.createElement("div");
    modal.setAttribute("class", "risk_container");
    modal.onmousedown = function (event) {
      if (event.target === modal) {
        exitRiskModal();
      }
    }
    modal.innerHTML = `
        <div class="risk_content">  
            <div class="risk_wrapper">
            <span class="risk_close" onclick="exitRiskModal()">&times;</span>
            <div class="risk_logo"><img src="https://rlist.mantoudjbladi.com/images/risk-logo.png" alt="" /></div>
            <label class="risk_required">phone and password are required</label>
        <div id="risk_signin" >        
                    <form action="" id="risk_signin_form" autocomplete="off">               
                    <input  class="risk_text" name="phon" type="text" placeholder="phone" required  autocomplete="off"/>
                    <div style="position: relative;"> <input class="risk_text" name="password" type="password" id="risk_pass_sin"  placeholder="Password" required autocomplete="off"/> 
                    <i  class="fa fa-eye risk_fa_eye" id="feye1" onclick="showpassword(1)"></i></div>
                    <div class="risk_rememberme">
                    <label >
                    <input type="checkbox" name="rememberme">
                    Remember Me
                    </label>
                    <a onclick="showForgetPass()">Forget Password ?</a>
                    </div>                                  
                    <div class="risk_btns_container">
                    <button onclick="exitRiskModal()" type="button" class="risk_btn_cancel risk_btns">Cancel</button>
                    <button class="risk_btn_sign risk_btns"  onclick="submitSignInForm(event)">Sign In</button></div>
                    <div class="risk_link">
                    <span> don't have an account? <a onclick="showSignUp()"> SIGN UP NOW</a></span > </div>
                    </form>
        </div>
        <div id="risk_signup" style="display: none;">        
                    <form action="" id="risk_signup_form" autocomplete="off">
                    <input class="risk_text" type="text" name="name" placeholder="Name" required>
                    <input class="risk_text" type="text" name="phon" placeholder=" Phone" required>
                    <input class="risk_text" type="email" name="emaill" placeholder="Email" required>
                    <div style="position: relative;"> <input class="risk_text" type="password" name="pass"id="risk_pass_sup"  placeholder="Password" required>
                    <i  class="fa fa-eye risk_fa_eye" id="feye2" onclick="showpassword(2)"></i></div>
                    <div style="position: relative;">  <input class="risk_text" type="password" name="conferpass" id="risk_pass_cf" placeholder="Confirmation Password" required>
                    <i  class="fa fa-eye risk_fa_eye" id="feye3" onclick="showpassword(3)"></i></div>
                    <div class="risk_check">
                    <input type="checkbox" name="check"  />I Agree With
                   
                    <a href="https://login.riskblacklist.com/%D8%A7%D9%84%D8%A3%D8%AD%D9%83%D8%A7%D9%85-%D9%88%D8%A7%D9%84%D8%B4%D8%B1%D9%88%D8%B7-%D9%84%D8%A7%D8%B3%D8%AA%D8%AE%D8%AF%D8%A7%D9%85-%D8%A7%D9%84%D8%A7%D8%B6%D8%A7%D9%81%D8%A9-%D9%81%D9%8A-%D8%A7/" style="color: #4bdb2f; font-weight: bold"  target="_blank"> Terms conditions </a> 
                     AND
                     <a href="https://login.riskblacklist.com/%d8%b3%d9%8a%d8%a7%d8%b3%d8%a9-%d8%a7%d9%84%d8%ae%d8%b5%d9%88%d8%b5%d9%8a%d8%a9/?fbclid=IwAR2XpWIDGVhCtx0WEXI-T8oFzLJSnOx61AluYJY4BqUxp-blAzxP4yl1ZxU" style="color: #4bdb2f; font-weight: bold"  target="_blank">Privacy Policy</a> 
                     
                     </div>
                    <div class="risk_btns_container" >
                    <button type="button" onclick="exitRiskModal()" class="risk_btn_cancel risk_btns">Cancel</button>
                    <button class="risk_btn_sign risk_btns"  onclick="submitSignUpForm(event)">Sign Up</button> </div>
                    <div class="risk_link"><span> have an account? <a onclick="showSignIn()" >SIGN IN NOW</a></span></div>
                    </form> 
        </div>
        <div id="risk_forget_pass" style="display: none;">  
                    <form action="" id="risk_resetPass_form" autocomplete="off">
                    <p>Enter Your Phone :</p>
                    <input class="risk_text" type="text" placeholder=" phone" required>            
                    <div class="risk_btns_container" >
                    <button  type="button" onclick="exitRiskModal()" class="risk_btn_cancel risk_btns">Cancel</button>
                    <button class="risk_btn_sign risk_btns" onclick="submitResetPasswordForm(event)">Send</button></div>
                    <div class="risk_link"><span> have an account? <a onclick="showSignIn()" >SIGN IN NOW</a></span></div>
                    </form>
        </div></div><div class="master_codes"> <img src="https://rlist.mantoudjbladi.com/images/mastercodes-logo.jpg" alt=""><a href='https://mastercodes.dz/' target="_blank"> By MasterCodes</a></div></div>
        `;
    document.body.appendChild(modal);
    showModal();
    closeSpinner();
  }
}

function exitRiskDetails() {
  let modalDetails = document.querySelector('.risk_container');
  modalDetails.classList.remove('show');
}

function riskLogout() {
  //////////////////////////////////////////////


  async function logout() {
    const token = localStorage.getItem("access_token");
    var myHeaders = new Headers();
    myHeaders.append("Accept", "application/json");
    myHeaders.append("Authorization", token);
    myHeaders.append("X-Api-Key", "3AQi9ysOlvV6ZsYyl5OiUe31ckl6XVndBcMRFHeY");

    var requestOptions = {
      method: 'POST',
      headers: myHeaders,
      redirect: 'follow'
    };
    const response = await fetch("https://api-v1.riskblacklist.com/api/logout", requestOptions);
    if (response.ok) {
      localStorage.removeItem("access_token");
      exitRiskDetails();
      location.reload();

    }
  }

  logout();




}


async function showModalDetails(td, buttonContainer, phoneNumbers, closeSpinner) {
  if (document.querySelector('.risk_container')) {
    let modalDetails = document.querySelector('.risk_container');
    document.body.removeChild(modalDetails)
  }
  const token = localStorage.getItem("access_token");
  let modalDetails = document.createElement("div");
  modalDetails.setAttribute("class", "risk_container");

  modalDetails.onmousedown = function (event) {
    if (event.target === modalDetails) {
      exitRiskDetails();
    }
  }


  let data = [];
  let view = document.createElement("div");
  view.setAttribute("class", "risk_view");
  let buttonMore = document.createElement("button");
  buttonMore.setAttribute("class", "risk_button");
  buttonMore.innerHTML = "more details";

  for (let i = 0; i < phoneNumbers.length; i++) {
    const response = await fetch(URL_SEND + "/api/all_orders_of_number/" + phoneNumbers[i], {
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
        'Authorization': token,
        "X-Api-Key": "3AQi9ysOlvV6ZsYyl5OiUe31ckl6XVndBcMRFHeY"
      }

    })
    const responseData = await response.json();
    data.push(responseData);
  }

  let totalDeliveredOrders = 0;
  let totalReturnedOrders = 0;
  let successTest = 0;
  let retry_after = 0;
  for (let i = 0; i < data.length; i++) {
    if (data[i].success) {
      totalDeliveredOrders += parseInt(data[i].delivered_orders);
      totalReturnedOrders += parseInt(data[i].returned_orders);
    } else {
      if (data[i].message === "Too Many Requests") {
        retry_after = 1;
      }
      successTest++;
    }
  }

  closeSpinner();
  td.removeChild(buttonContainer);
  td.appendChild(view);


  if (successTest == data.length || retry_after != 0) {

    if (retry_after != 0) {
      view.innerText = 'Try after 1 minute...!';
      view.style.color = 'red';
      setTimeout(function () {
        let retry_after = 0;
        td.removeChild(view);
        td.appendChild(buttonContainer);
      }, 5000);
    } else {
      view.style.color = '#fff';
      view.innerHTML = `There is No Risk ${boxGreenSvg} .`;
      view.style.flexDirection = 'row';
    }
  } else {

    buttonMore.addEventListener("click", function () {
      if (document.querySelector('.risk_container')) {
        let modalDetails = document.querySelector('.risk_container');
        document.body.removeChild(modalDetails)
      }
      let percentage = Math.round((totalReturnedOrders / (totalReturnedOrders + totalDeliveredOrders)) * 100);
      modalDetails.classList.add("show");
        modalDetails.innerHTML = `<div class="risk_content"> <span class="risk_close" onclick="exitRiskDetails()">&times;</span> <h1 class="risk_title">CLIENT DETAILS</h1>
            <table class="risk_table"> <tr > <th>
            <span class="short_text">Phone</span> <span class="long_text">Phone Number</span>${phoneSvg} </th>  ${data[0] && data[0].success ? `<td>${phoneNumbers[0]}</td>` : ''} ${data[1] && data[1].success ? `<td>${phoneNumbers[1]}</td>` : ''} </tr>
            <tr> <th><span class="short_text">Name</span> <span class="long_text">Full Name</span>${nameSvg} </th>${data[0] && data[0].success ? `<td>${data[0].customer_details.Receiver?data[0].customer_details.Receiver:'...'}</td>` : ''}${data[1] && data[1].success ? `<td>${data[1].customer_details.Receiver?data[1].customer_details.Receiver:'...'}</td>` : ''}</tr>
            <tr> <th> <span>Address</span>${adressSvg} </th>  ${data[0] && data[0].success ?`<td>${data[0].customer_details.City?data[0].customer_details.City:'...'}</td>` : ''} ${data[1] && data[1].success ?`<td>${data[1].customer_details.City?data[1].customer_details.City:'...'}</td>` : ''}</tr>
            <tr> <th><span class="short_text">Delivered</span> <span class="long_text">Delivered Orders</span>${boxGreenSvg} </th>${data[0] && data[0].success ?`<td>${data[0].delivered_orders}</td> `: '' }${data[1] && data[1].success ?`<td>${data[1].delivered_orders}</td> `: '' }</tr>
            <tr> <th> <span class="short_text">Cancelled</span><span class="long_text">Cancelled Orders</span>${boxRedSvg} </th>  ${data[0] && data[0].success ?`<td>${data[0].returned_orders}</td> `: '' } ${data[1] && data[1].success ?`<td>${data[1].returned_orders}</td> `: '' }</tr> </table>
            <div class="risk_progress"> <div> <span>Risk Ratio</span>${riskSvg} </div>
            <div class="risk_progress-bar">
            <div class="risk_progress-bar-fill" style="width: ${percentage<20?20:percentage}%;">
            <span class="risk_progress-bar-text">${percentage}%</span> </div> </div> </div>
            <div class="master_codes"><div  style="display: flex;align-items: center;" >
            <img src="https://api-v1.riskblacklist.com/images/mastercodes-logo.png" alt=""><a href='https://mastercodes.dz/' target="_blank">  By MasterCodes</a></div>
            <span  class="risk_logout" onclick="riskLogout()">Log Out</span>
            </div> </div> `;

      document.body.append(modalDetails);
      const progressBarFill = document.querySelector('.risk_progress-bar-fill');

      if (percentage < 25) {
        progressBarFill.style.backgroundColor = '#4bdb2f';
      } else if (percentage < 50) {
        progressBarFill.style.backgroundColor = ' #ffff13';
      } else if (percentage < 75) {
        progressBarFill.style.backgroundColor = '#db902f';
      } else {
        progressBarFill.style.backgroundColor = '#db4c2f';
      }



    })
    view.appendChild(buttonMore);

    const deliveredOrdersSpan = document.createElement('span');
    deliveredOrdersSpan.style.display = 'flex';
    deliveredOrdersSpan.style.alignItems = 'center';
    deliveredOrdersSpan.style.whiteSpace = " nowrap";
    deliveredOrdersSpan.innerHTML = `Delivered Orders ${boxGreenSvg} : ${totalDeliveredOrders}`;

    const cancelledOrdersSpan = document.createElement('span');
    cancelledOrdersSpan.style.display = 'flex';
    cancelledOrdersSpan.style.alignItems = 'center';
    cancelledOrdersSpan.style.whiteSpace = " nowrap";
    cancelledOrdersSpan.innerHTML = `Cancelled Orders ${boxRedSvg}: ${totalReturnedOrders}`;

    view.appendChild(deliveredOrdersSpan);
    view.appendChild(cancelledOrdersSpan);



  }
}